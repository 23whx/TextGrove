# 多语言（i18n）使用说明

## 已实现功能

✅ 支持中文（zh）、英文（en）、日文（ja）、韩文（ko）四种语言
✅ 右上角语言切换器，点击即可切换
✅ 语言偏好自动保存到 localStorage
✅ 已翻译核心组件（Editor、ToolTabs）

## 在组件中使用多语言

### 1. 导入 useTranslation Hook

```tsx
import { useTranslation } from '@/hooks/useTranslation';

export default function MyComponent() {
  const t = useTranslation();
  
  return (
    <div>
      <h1>{t.appName}</h1>
      <p>{t.aboutIntroText}</p>
    </div>
  );
}
```

### 2. 可用的翻译键

所有可用的翻译键都定义在 `src/lib/i18n.ts` 的 `Translations` 接口中，包括：

**通用**
- `appName` - 应用名称
- `appSubtitle` - 应用副标题
- `settings` - 设置
- `about` - 关于
- `backToHome` - 返回首页

**工具标签**
- `toolStats` - 总字数统计
- `toolDedup` - 文本去重
- `toolFreq` - 词频统计
- `toolSimpTrad` - 简繁转换
- `toolFormat` - 文本格式化

**编辑器**
- `editorPlaceholder` - 输入框占位符
- `clear` - 清空
- `copy` - 复制
- `importFile` - 导入文件

**Toast 消息**
- `toastCopied` - 已复制到剪贴板
- `toastCleared` - 已清空内容
- `toastFileImported` - 文件导入成功
- 等等...

### 3. 添加新的翻译

编辑 `src/lib/i18n.ts`：

```typescript
export interface Translations {
  // ... 现有翻译
  myNewKey: string;  // 1. 先在接口中声明
}

export const translations: Record<Language, Translations> = {
  zh: {
    // ... 现有翻译
    myNewKey: '我的新文本',  // 2. 为每种语言添加翻译
  },
  en: {
    // ... 现有翻译
    myNewKey: 'My new text',
  },
  ja: {
    // ... 现有翻译
    myNewKey: '私の新しいテキスト',
  },
  ko: {
    // ... 现有翻译
    myNewKey: '내 새 텍스트',
  },
};
```

### 4. 待完成的组件翻译

以下组件还需要添加多语言支持（示例已提供）：

- ✅ `Editor.tsx` - 已完成
- ✅ `ToolTabs.tsx` - 已完成
- ⚠️ `panels/StatsCard.tsx` - 需要更新
- ⚠️ `panels/DedupPanel.tsx` - 需要更新
- ⚠️ `panels/FreqPanel.tsx` - 需要更新
- ⚠️ `panels/SimpTradPanel.tsx` - 需要更新
- ⚠️ `panels/FormatPanel.tsx` - 需要更新
- ⚠️ `pages/about.astro` - 需要更新
- ⚠️ `pages/settings.astro` - 需要更新
- ⚠️ `pages/index.astro` - 需要更新

## 示例：更新 StatsCard 组件

```tsx
import { useAppStore } from '@/store/useAppStore';
import { useTranslation } from '@/hooks/useTranslation';
import { getTextStats } from '@/lib/text';
import { formatBytes } from '@/lib/bytes';

export default function StatsCard() {
  const text = useAppStore((state) => state.editor.text);
  const t = useTranslation();
  const stats = getTextStats(text);

  const statItems = [
    { label: t.statsCharsWithSpace, value: stats.charsWithSpace.toLocaleString() },
    { label: t.statsCharsWithoutSpace, value: stats.charsWithoutSpace.toLocaleString() },
    { label: t.statsUnicodeChars, value: stats.codePoints.toLocaleString() },
    { label: t.statsLines, value: stats.lines.toLocaleString() },
    { label: t.statsWords, value: stats.words.toLocaleString() },
    { label: t.statsBytes, value: `${stats.bytes.toLocaleString()} (${formatBytes(stats.bytes)})` },
  ];

  return (
    <div className="card p-6 rounded-2xl shadow-lg">
      <h2 className="text-xl font-semibold mb-4 text-gray-800">{t.statsTitle}</h2>
      {/* ... 其余代码 */}
    </div>
  );
}
```

## 技术细节

- **状态管理**: 语言偏好保存在 Zustand store 中
- **持久化**: 自动保存到 localStorage (`textgrove-language`)
- **默认语言**: 中文（zh）
- **类型安全**: 完全 TypeScript 支持

## 注意事项

1. 所有文本都应该使用翻译键，避免硬编码
2. 添加新翻译时，确保为所有四种语言都提供翻译
3. Toast 消息、按钮文本、标题等都应该使用多语言
4. 可以根据需要添加更多语言（只需在 `i18n.ts` 中添加）

---

**提示**: 您可以按照 `Editor.tsx` 和 `ToolTabs.tsx` 的示例，逐步为其他组件添加多语言支持。

